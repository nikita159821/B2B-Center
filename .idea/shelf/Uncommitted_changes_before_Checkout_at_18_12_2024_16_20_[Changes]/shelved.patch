Index: API_B2B_Center/endpoints/migrated_document.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import os\r\nimport requests\r\nfrom dotenv import load_dotenv\r\nimport allure\r\nfrom API_B2B_Center.test.data import URL\r\n\r\n# Загрузка переменных окружения из .env файла\r\nload_dotenv()\r\n\r\nclass MigratedDocument:\r\n    def __init__(self):\r\n        self.response = None\r\n\r\n    @allure.step('Отправка запроса на миграцию документа')\r\n    def migrated_document(self, payload):\r\n        token = os.getenv('API_TOKEN')\r\n        headers = {\r\n            'Authorization': f'Bearer {token}',\r\n            'Content-Type': 'application/json'\r\n        }\r\n\r\n        self.response = requests.post(URL, json=payload, headers=headers)\r\n        return self.response\r\n\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/API_B2B_Center/endpoints/migrated_document.py b/API_B2B_Center/endpoints/migrated_document.py
--- a/API_B2B_Center/endpoints/migrated_document.py	(revision 907d4f7a91ede731d882274694c2380d3494e012)
+++ b/API_B2B_Center/endpoints/migrated_document.py	(date 1734520855142)
@@ -2,7 +2,7 @@
 import requests
 from dotenv import load_dotenv
 import allure
-from API_B2B_Center.test.data import URL
+from api_b2b_center.test.data import URL
 
 # Загрузка переменных окружения из .env файла
 load_dotenv()
Index: API_B2B_Center/test/test_migrated_document.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import allure\r\n\r\nfrom API_B2B_Center.endpoints.migrated_document import MigratedDocument\r\nfrom API_B2B_Center.test.data import EXPECTED_RESPONSE_BODY_MIGRATE_CHILD_DOCUMENT, \\\r\n    EXPECTED_RESPONSE_BODY_DOCUMENT_ALREADY_EXISTS, EXPECTED_RESPONSE_BODY_DOCUMENT_ALREADY_EXISTS_PAYLOAD, \\\r\n    EXPECTED_RESPONSE_BODY_MIGRATE_CHILD_DOCUMENT_PAYLOAD, EXPECTED_RESPONSE_BODY_SUPPLIER_NOT_FOUND_PAYLOAD, \\\r\n    EXPECTED_RESPONSE_BODY_SUPPLIER_NOT_FOUND, EXPECTED_RESPONSE_BODY_CONTRACT_KIND_CODE_REQUIRED_PAYLOAD, \\\r\n    EXPECTED_RESPONSE_BODY_CONTRACT_KIND_CODE_REQUIRED, EXPECTED_RESPONSE_BODY_ITEM_NUMBER_REQUIRED_PAYLOAD, \\\r\n    EXPECTED_RESPONSE_BODY_ITEM_NUMBER_REQUIRED, EXPECTED_RESPONSE_BODY_ACCOUNT_DETAILS_ID_REQUIRED_PAYLOAD, \\\r\n    EXPECTED_RESPONSE_BODY_ACCOUNT_DETAILS_ID_REQUIRED, EXPECTED_RESPONSE_BODY_INSUFFICIENT_PRIVILEGES_PAYLOAD, \\\r\n    EXPECTED_RESPONSE_BODY_INSUFFICIENT_PRIVILEGES, EXPECTED_RESPONSE_BODY_VALIDITY_START_DATE_REQUIRED_PAYLOAD, \\\r\n    EXPECTED_RESPONSE_BODY_VALIDITY_START_DATE_REQUIRED, EXPECTED_RESPONSE_BODY_INVALID_DATES_PAYLOAD, \\\r\n    EXPECTED_RESPONSE_BODY_INVALID_DATES, EXPECTED_RESPONSE_BODY_INVALID_DATE_ORDER_PAYLOAD, \\\r\n    EXPECTED_RESPONSE_BODY_INVALID_DATE_ORDER, EXPECTED_RESPONSE_BODY_RCM_SUM_NOT_NUMBER_PAYLOAD, \\\r\n    EXPECTED_RESPONSE_BODY_RCM_SUM_NOT_NUMBER, EXPECTED_RESPONSE_BODY_RCM_SUM_INVALID_COMMA_PAYLOAD, \\\r\n    EXPECTED_RESPONSE_BODY_RCM_SUM_INVALID_COMMA, EXPECTED_RESPONSE_BODY_RCM_SUM_WITH_NDS_NOT_NUMBER_PAYLOAD, \\\r\n    EXPECTED_RESPONSE_BODY_RCM_SUM_WITH_NDS_NOT_NUMBER, EXPECTED_RESPONSE_BODY_RCM_SUM_WITH_NDS_INVALID_COMMA_PAYLOAD, \\\r\n    EXPECTED_RESPONSE_BODY_RCM_SUM_WITH_NDS_INVALID_COMMA, EXPECTED_RESPONSE_BODY_CONTRACT_STATE_CODE_INVALID_PAYLOAD, \\\r\n    EXPECTED_RESPONSE_BODY_CONTRACT_STATE_CODE_INVALID, EXPECTED_RESPONSE_BODY_CONTRACT_STATE_CODE_REQUIRED_PAYLOAD, \\\r\n    EXPECTED_RESPONSE_BODY_CONTRACT_STATE_CODE_REQUIRED, EXPECTED_RESPONSE_BODY_RCM_SIGN_PLACE_REQUIRED_PAYLOAD, \\\r\n    EXPECTED_RESPONSE_BODY_RCM_SIGN_PLACE_REQUIRED, EXPECTED_RESPONSE_BODY_LOAD_CATALOG_INVALID, \\\r\n    EXPECTED_RESPONSE_BODY_LOAD_CATALOG_INVALID_PAYLOAD, EXPECTED_RESPONSE_BODY_CURRENCY_CODE_REQUIRED_PAYLOAD, \\\r\n    EXPECTED_RESPONSE_BODY_CURRENCY_CODE_REQUIRED, EXPECTED_RESPONSE_BODY_CURRENCY_CODE_NOT_FOUND_PAYLOAD, \\\r\n    EXPECTED_RESPONSE_BODY_CURRENCY_CODE_NOT_FOUND, EXPECTED_RESPONSE_BODY_PAYMENT_CONDITION_REQUIRED_PAYLOAD, \\\r\n    EXPECTED_RESPONSE_BODY_PAYMENT_CONDITION_REQUIRED, EXPECTED_RESPONSE_BODY_PAYMENT_CONDITION_NOT_FOUND_PAYLOAD, \\\r\n    EXPECTED_RESPONSE_BODY_PAYMENT_CONDITION_NOT_FOUND, EXPECTED_RESPONSE_BODY_VAT_RATE_INVALID_PAYLOAD, \\\r\n    EXPECTED_RESPONSE_BODY_VAT_RATE_INVALID, EXPECTED_RESPONSE_BODY_POSITION_NOT_FOUND_PAYLOAD, \\\r\n    EXPECTED_RESPONSE_BODY_POSITION_NOT_FOUND\r\n\r\n\r\nclass TestMigratedDocument:\r\n    @allure.title('Миграция дочернего документа без привязки к родительскому')\r\n    def test_migrate_child_document_without_parent_link(self):\r\n        migrate_child_document = MigratedDocument()\r\n        response = migrate_child_document.migrated_document(EXPECTED_RESPONSE_BODY_MIGRATE_CHILD_DOCUMENT_PAYLOAD)\r\n        response_body = response.json()\r\n\r\n        assert response.status_code == 200\r\n        assert response_body == EXPECTED_RESPONSE_BODY_MIGRATE_CHILD_DOCUMENT\r\n\r\n    @allure.title('Миграция существующего документа')\r\n    def test_migrate_existing_document(self):\r\n        migrate_existing_document = MigratedDocument()\r\n        response = migrate_existing_document.migrated_document(EXPECTED_RESPONSE_BODY_DOCUMENT_ALREADY_EXISTS_PAYLOAD)\r\n        response_body = response.json()\r\n\r\n        assert response.status_code == 200\r\n        assert response_body == EXPECTED_RESPONSE_BODY_DOCUMENT_ALREADY_EXISTS\r\n\r\n    @allure.title('Миграция документа с несуществующим поставщиком')\r\n    def test_migrate_supplier_not_found(self):\r\n        migrate_document = MigratedDocument()\r\n        response = migrate_document.migrated_document(EXPECTED_RESPONSE_BODY_SUPPLIER_NOT_FOUND_PAYLOAD)\r\n        response_body = response.json()\r\n\r\n        assert response.status_code == 200\r\n        assert response_body == EXPECTED_RESPONSE_BODY_SUPPLIER_NOT_FOUND\r\n\r\n    @allure.title('Миграция документа без contract_kind_code')\r\n    def test_migrate_missing_contract_kind_code(self):\r\n        migrate_document = MigratedDocument()\r\n        response = migrate_document.migrated_document(EXPECTED_RESPONSE_BODY_CONTRACT_KIND_CODE_REQUIRED_PAYLOAD)\r\n        response_body = response.json()\r\n\r\n        assert response.status_code == 200\r\n        assert response_body == EXPECTED_RESPONSE_BODY_CONTRACT_KIND_CODE_REQUIRED\r\n\r\n    @allure.title('Миграция документа без item_number')\r\n    def test_migrate_missing_item_number_positions(self):\r\n        migrate_document = MigratedDocument()\r\n        response = migrate_document.migrated_document(EXPECTED_RESPONSE_BODY_ITEM_NUMBER_REQUIRED_PAYLOAD)\r\n        response_body = response.json()\r\n\r\n        assert response.status_code == 200\r\n        assert response_body == EXPECTED_RESPONSE_BODY_ITEM_NUMBER_REQUIRED\r\n\r\n    @allure.title('Миграция документа без account_details_id')\r\n    def test_migrate_missing_account_details_id(self):\r\n        migrate_document = MigratedDocument()\r\n        response = migrate_document.migrated_document(EXPECTED_RESPONSE_BODY_ACCOUNT_DETAILS_ID_REQUIRED_PAYLOAD)\r\n        response_body = response.json()\r\n\r\n        assert response.status_code == 200\r\n        assert response_body == EXPECTED_RESPONSE_BODY_ACCOUNT_DETAILS_ID_REQUIRED\r\n\r\n    @allure.title('Миграция документа с недостаточными правами')\r\n    def test_migrate_insufficient_privileges(self):\r\n        migrate_document = MigratedDocument()\r\n        response = migrate_document.migrated_document(EXPECTED_RESPONSE_BODY_INSUFFICIENT_PRIVILEGES_PAYLOAD)\r\n        response_body = response.json()\r\n\r\n        assert response.status_code == 403\r\n        assert response_body == EXPECTED_RESPONSE_BODY_INSUFFICIENT_PRIVILEGES\r\n\r\n    @allure.title('Миграция документа без validity_start_date')\r\n    def test_create_parent_document_missing_validity_start_date(self):\r\n        migrate_document = MigratedDocument()\r\n        response = migrate_document.migrated_document(EXPECTED_RESPONSE_BODY_VALIDITY_START_DATE_REQUIRED_PAYLOAD)\r\n        response_body = response.json()\r\n\r\n        assert response.status_code == 200\r\n        assert response_body == EXPECTED_RESPONSE_BODY_VALIDITY_START_DATE_REQUIRED\r\n\r\n    @allure.title('Миграция документа с некорректной validity_start_date и validity_end_date')\r\n    def test_create_parent_document_invalid_dates(self):\r\n        migrate_document = MigratedDocument()\r\n        response = migrate_document.migrated_document(EXPECTED_RESPONSE_BODY_INVALID_DATES_PAYLOAD)\r\n        response_body = response.json()\r\n\r\n        assert response.status_code == 200\r\n        assert response_body == EXPECTED_RESPONSE_BODY_INVALID_DATES\r\n\r\n    @allure.title('Миграция документа с validity_end_date меньше validity_start_date')\r\n    def test_create_parent_document_invalid_date_order(self):\r\n        migrate_document = MigratedDocument()\r\n        response = migrate_document.migrated_document(EXPECTED_RESPONSE_BODY_INVALID_DATE_ORDER_PAYLOAD)\r\n        response_body = response.json()\r\n\r\n        assert response.status_code == 200\r\n        assert response_body == EXPECTED_RESPONSE_BODY_INVALID_DATE_ORDER\r\n\r\n    @allure.title('Миграция документа с строковым значением rcm_sum_no_nds')\r\n    def test_create_parent_document_invalid_rcm_sum(self):\r\n        migrate_document = MigratedDocument()\r\n        response = migrate_document.migrated_document(EXPECTED_RESPONSE_BODY_RCM_SUM_NOT_NUMBER_PAYLOAD)\r\n        response_body = response.json()\r\n\r\n        assert response.status_code == 200\r\n        assert response_body == EXPECTED_RESPONSE_BODY_RCM_SUM_NOT_NUMBER\r\n\r\n    @allure.title('Миграция документа с запятой в теге rcm_sum_no_nds')\r\n    def test_create_parent_document_invalid_rcm_sum_with_comma(self):\r\n        migrate_document = MigratedDocument()\r\n        response = migrate_document.migrated_document(EXPECTED_RESPONSE_BODY_RCM_SUM_INVALID_COMMA_PAYLOAD)\r\n        response_body = response.json()\r\n\r\n        assert response.status_code == 200\r\n        assert response_body == EXPECTED_RESPONSE_BODY_RCM_SUM_INVALID_COMMA\r\n\r\n    @allure.title('Миграция документа с строковым значением rcm_sum_with_nds')\r\n    def test_create_parent_document_invalid_rcm_sum_with_text(self):\r\n        migrate_document = MigratedDocument()\r\n        response = migrate_document.migrated_document(EXPECTED_RESPONSE_BODY_RCM_SUM_WITH_NDS_NOT_NUMBER_PAYLOAD)\r\n        response_body = response.json()\r\n\r\n        assert response.status_code == 200\r\n        assert response_body == EXPECTED_RESPONSE_BODY_RCM_SUM_WITH_NDS_NOT_NUMBER\r\n\r\n    @allure.title('Миграция документа с запятой в теге rcm_sum_with_nds')\r\n    def test_create_parent_document_invalid_rcm_sum_with_comma(self):\r\n        migrate_document = MigratedDocument()\r\n        response = migrate_document.migrated_document(EXPECTED_RESPONSE_BODY_RCM_SUM_WITH_NDS_INVALID_COMMA_PAYLOAD)\r\n        response_body = response.json()\r\n\r\n        assert response.status_code == 200\r\n        assert response_body == EXPECTED_RESPONSE_BODY_RCM_SUM_WITH_NDS_INVALID_COMMA\r\n\r\n    @allure.title('Миграция документа с значением 4 в теге contract_state_code')\r\n    def test_create_parent_document_invalid_contract_state_code(self):\r\n        migrate_document = MigratedDocument()\r\n        response = migrate_document.migrated_document(EXPECTED_RESPONSE_BODY_CONTRACT_STATE_CODE_INVALID_PAYLOAD)\r\n        response_body = response.json()\r\n\r\n        assert response.status_code == 200\r\n        assert response_body == EXPECTED_RESPONSE_BODY_CONTRACT_STATE_CODE_INVALID\r\n\r\n    @allure.title('Миграция документа с пустым тегом contract_state_code')\r\n    def test_create_parent_document_missing_contract_state_code(self):\r\n        migrate_document = MigratedDocument()\r\n        response = migrate_document.migrated_document(EXPECTED_RESPONSE_BODY_CONTRACT_STATE_CODE_REQUIRED_PAYLOAD)\r\n        response_body = response.json()\r\n\r\n        assert response.status_code == 200\r\n        assert response_body == EXPECTED_RESPONSE_BODY_CONTRACT_STATE_CODE_REQUIRED\r\n\r\n    @allure.title('Миграция документа с пустым тегом rcm_sign_place')\r\n    def test_create_parent_document_missing_contract_state_code(self):\r\n        migrate_document = MigratedDocument()\r\n        response = migrate_document.migrated_document(EXPECTED_RESPONSE_BODY_RCM_SIGN_PLACE_REQUIRED_PAYLOAD)\r\n        response_body = response.json()\r\n\r\n        assert response.status_code == 200\r\n        assert response_body == EXPECTED_RESPONSE_BODY_RCM_SIGN_PLACE_REQUIRED\r\n\r\n    @allure.title('Создание родительского документа с недопустимым значением load_catalog')\r\n    def test_create_parent_document_invalid_load_catalog(self):\r\n        migrate_document = MigratedDocument()\r\n        response = migrate_document.migrated_document(EXPECTED_RESPONSE_BODY_LOAD_CATALOG_INVALID_PAYLOAD)\r\n        response_body = response.json()\r\n\r\n        assert response.status_code == 200\r\n        assert response_body == EXPECTED_RESPONSE_BODY_LOAD_CATALOG_INVALID\r\n\r\n    @allure.title('Создание родительского документа с пустым значением currency_code')\r\n    def test_create_parent_document_missing_currency_code(self):\r\n        migrate_document = MigratedDocument()\r\n        response = migrate_document.migrated_document(EXPECTED_RESPONSE_BODY_CURRENCY_CODE_REQUIRED_PAYLOAD)\r\n        response_body = response.json()\r\n\r\n        assert response.status_code == 200\r\n        assert response_body == EXPECTED_RESPONSE_BODY_CURRENCY_CODE_REQUIRED\r\n\r\n    @allure.title('Создание родительского документа с несущ.значением currency_code')\r\n    def test_create_parent_document_invalid_currency_code(self):\r\n        migrate_document = MigratedDocument()\r\n        response = migrate_document.migrated_document(EXPECTED_RESPONSE_BODY_CURRENCY_CODE_NOT_FOUND_PAYLOAD)\r\n        response_body = response.json()\r\n\r\n        assert response.status_code == 200\r\n        assert response_body == EXPECTED_RESPONSE_BODY_CURRENCY_CODE_NOT_FOUND\r\n\r\n    @allure.title('Создание родительского документа с пустым значением payment_condition')\r\n    def test_create_parent_document_missing_payment_condition(self):\r\n        migrate_document = MigratedDocument()\r\n        response = migrate_document.migrated_document(EXPECTED_RESPONSE_BODY_PAYMENT_CONDITION_REQUIRED_PAYLOAD)\r\n        response_body = response.json()\r\n\r\n        assert response.status_code == 200\r\n        assert response_body == EXPECTED_RESPONSE_BODY_PAYMENT_CONDITION_REQUIRED\r\n\r\n    @allure.title('Создание родительского документа с несущ.значением payment_condition')\r\n    def test_create_parent_document_invalid_payment_condition(self):\r\n        migrate_document = MigratedDocument()\r\n        response = migrate_document.migrated_document(EXPECTED_RESPONSE_BODY_PAYMENT_CONDITION_NOT_FOUND_PAYLOAD)\r\n        response_body = response.json()\r\n\r\n        assert response.status_code == 200\r\n        assert response_body == EXPECTED_RESPONSE_BODY_PAYMENT_CONDITION_NOT_FOUND\r\n\r\n    @allure.title('Создание родительского документа со строкой в теге vat_rate')\r\n    def test_create_parent_document_invalid_vat_rate(self):\r\n        migrate_document = MigratedDocument()\r\n        response = migrate_document.migrated_document(EXPECTED_RESPONSE_BODY_VAT_RATE_INVALID_PAYLOAD)\r\n        response_body = response.json()\r\n\r\n        assert response.status_code == 200\r\n        assert response_body == EXPECTED_RESPONSE_BODY_VAT_RATE_INVALID\r\n\r\n    @allure.title('Создание родительского документа с несущ.значением material_number')\r\n    def test_create_parent_document_invalid_material_number(self):\r\n        migrate_document = MigratedDocument()\r\n        response = migrate_document.migrated_document(EXPECTED_RESPONSE_BODY_POSITION_NOT_FOUND_PAYLOAD)  # Передаем переменную\r\n        response_body = response.json()\r\n\r\n        assert response.status_code == 200\r\n        assert response_body == EXPECTED_RESPONSE_BODY_POSITION_NOT_FOUND
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/API_B2B_Center/test/test_migrated_document.py b/API_B2B_Center/test/test_migrated_document.py
--- a/API_B2B_Center/test/test_migrated_document.py	(revision 907d4f7a91ede731d882274694c2380d3494e012)
+++ b/API_B2B_Center/test/test_migrated_document.py	(date 1734520627857)
@@ -1,7 +1,7 @@
 import allure
 
-from API_B2B_Center.endpoints.migrated_document import MigratedDocument
-from API_B2B_Center.test.data import EXPECTED_RESPONSE_BODY_MIGRATE_CHILD_DOCUMENT, \
+from api_b2b_center.endpoints.migrated_document import MigratedDocument
+from api_b2b_center.test.data import EXPECTED_RESPONSE_BODY_MIGRATE_CHILD_DOCUMENT, \
     EXPECTED_RESPONSE_BODY_DOCUMENT_ALREADY_EXISTS, EXPECTED_RESPONSE_BODY_DOCUMENT_ALREADY_EXISTS_PAYLOAD, \
     EXPECTED_RESPONSE_BODY_MIGRATE_CHILD_DOCUMENT_PAYLOAD, EXPECTED_RESPONSE_BODY_SUPPLIER_NOT_FOUND_PAYLOAD, \
     EXPECTED_RESPONSE_BODY_SUPPLIER_NOT_FOUND, EXPECTED_RESPONSE_BODY_CONTRACT_KIND_CODE_REQUIRED_PAYLOAD, \
